{"version":3,"sources":["webpack:///webpack/bootstrap 60220dc26790f73e5a33","webpack:///./src/components/index.ts","webpack:///external \"react\"","webpack:///external \"react-apollo\"","webpack:///external \"@sample-stack/graphql-gql\"","webpack:///./src/index.ts","webpack:///./src/components/Counter.tsx","webpack:///./src/containers/index.ts","webpack:///./src/containers/Counter.tsx","webpack:///external \"@sample-stack/client-redux\"","webpack:///external \"react-redux\"","webpack:///external \"react-redux-typescript\"","webpack:///./src/containers/PersonList.tsx","webpack:///external \"recompose\"","webpack:///./src/containers/ServerCounter.tsx","webpack:///external \"immutability-helper\"","webpack:///external \"@sample-stack/client-core\""],"names":[],"mappings":"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","file":"lib/index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 60220dc26790f73e5a33","export * from './Counter';\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/index.ts","module.exports = require(\"react\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"react\"\n// module id = 1\n// module chunks = 0","module.exports = require(\"react-apollo\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"react-apollo\"\n// module id = 2\n// module chunks = 0","module.exports = require(\"@sample-stack/graphql-gql\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"@sample-stack/graphql-gql\"\n// module id = 3\n// module chunks = 0","export * from './components';\nexport * from './containers';\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.ts","import * as React from 'react';\n\nexport interface ICounterProps {\n    label: string;\n    counter: { value: number };\n    isSaving: boolean;\n    isLoading: boolean;\n    error: string;\n    increment: (n: number) => void;\n    save: (n: number) => void;\n    load: () => void;\n}\n\nexport interface ICounterState {\n}\n\nexport class CounterComponent extends React.Component<ICounterProps, ICounterState> {\n\n    private _onClickIncrement = (e: React.SyntheticEvent<HTMLButtonElement>) => {\n        e.preventDefault();\n        this.props.increment(1);\n    }\n\n    private _onClickSave = (e: React.SyntheticEvent<HTMLButtonElement>) => {\n        e.preventDefault();\n        if (!this.props.isSaving) {\n            this.props.save(this.props.counter.value);\n        }\n    }\n\n    private _onClickLoad = (e: React.SyntheticEvent<HTMLButtonElement>) => {\n        e.preventDefault();\n        if (!this.props.isLoading) {\n            this.props.load();\n        }\n    }\n\n    public render(): JSX.Element {\n        const { counter, label, isSaving, isLoading, error } = this.props;\n        return (\n            <form>\n                <legend>{label}</legend>\n                <pre>{JSON.stringify({ counter, isSaving, isLoading }, null, 2)}</pre>\n                <button onClick={this._onClickIncrement}>click me!</button>\n                <button disabled={isSaving} onClick={this._onClickSave}>{isSaving ? 'saving...' : 'save'}</button>\n                <button disabled={isLoading} onClick={this._onClickLoad}>{isLoading ? 'loading...' : 'load'}</button>\n                {error ? <div className=\"error\">{error}</div> : null}\n            </form>);\n    }\n}\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/Counter.tsx","export * from './Counter';\nexport * from './PersonList';\n// export * from './Loading';\nexport * from './ServerCounter';\n\n\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/containers/index.ts","import {\n  incrementCounter,\n  loadCount,\n  saveCount,\n  Action,\n  Store,\n} from '@sample-stack/client-redux';\nimport { connect } from 'react-redux';\nimport { returntypeof } from 'react-redux-typescript';\nimport * as redux from 'redux';\nimport { CounterComponent, ICounterProps } from '../components';\n\nexport type CounterOwnProps = {\n  label: string;\n  store?: Store.Sample;\n};\n\nconst mapStateToProps = (state: Store.Sample) => ({\n  counter: state['@sample-stack/counter'],\n  isSaving: state['@sample-stack/isSaving'],\n  isLoading: state['@sample-stack/isLoading'],\n  error: state['@sample-stack/error'],\n});\n\nconst mapDispatchToProps = (dispatch: Function) => ({\n  increment: (n: number) =>\n    dispatch(incrementCounter(n)),\n  load: () =>\n    dispatch(loadCount(null)),\n  save: (value: number) =>\n    dispatch(saveCount({ value })),\n});\n\nconst stateProps = returntypeof(mapStateToProps);\nconst dispatchProps = returntypeof(mapDispatchToProps);\ntype StateProps = typeof stateProps;\ntype DispatchProps = typeof dispatchProps;\n\n// https://github.com/DefinitelyTyped/DefinitelyTyped/issues/8787\nexport const Counter: React.ComponentClass<CounterOwnProps> =\nconnect<StateProps, DispatchProps, CounterOwnProps>(mapStateToProps, mapDispatchToProps)(CounterComponent);\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/containers/Counter.tsx","module.exports = require(\"@sample-stack/client-redux\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"@sample-stack/client-redux\"\n// module id = 8\n// module chunks = 0","module.exports = require(\"react-redux\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"react-redux\"\n// module id = 9\n// module chunks = 0","module.exports = require(\"react-redux-typescript\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"react-redux-typescript\"\n// module id = 10\n// module chunks = 0","import * as React from 'react';\nimport { graphql, gql } from 'react-apollo';\nimport { pure, compose, flattenProp } from 'recompose';\nimport { PERSONS_QUERY, getPersonsQuery } from '@sample-stack/graphql-gql';\nimport { ApolloQueryResult } from 'apollo-client';\n\nexport interface IPersonListProps {\n    persons;\n}\nconst PersonListComponent: React.SFC<IPersonListProps> = ({ persons }) => (\n    <div>\n        <h2>Persons:</h2>\n       {persons && persons.map((person, i) => <div key={i}>{person.name}</div>)}\n    </div>\n);\n\nexport const PersonList: React.ComponentClass<{}> =\n    compose(\n        graphql<getPersonsQuery>(PERSONS_QUERY),\n        flattenProp('data'),\n        pure,\n    )(PersonListComponent);\n\n\n\n// WEBPACK FOOTER //\n// ./src/containers/PersonList.tsx","module.exports = require(\"recompose\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"recompose\"\n// module id = 12\n// module chunks = 0","import * as React from 'react';\nimport update from 'immutability-helper';\nimport { graphql, compose } from 'react-apollo';\nimport { ApolloQueryResult } from 'apollo-client';\nimport { CounterComponent, ICounterProps } from '../components';\nimport {\n    COUNT_SUBSCRIPTION, COUNT_QUERY, getCountQuery, addCountMutation,\n    ADD_COUNT_MUTATION, subscribeToCountSubscription,\n} from '@sample-stack/graphql-gql';\nimport { logger } from '@sample-stack/client-core';\ntype SubscriptionProps = {\n    subscribeToMore: Function;\n};\n\n// class WithSubscriptionCounter extends React.Component<SubscriptionProps & ICounterProps, {}> {\n\n//     public subscription;\n\n//     constructor(props) {\n//         super(props);\n//     }\n\n//     public componentWillReceiveProps(nextProps) {\n//         if (!nextProps.loading) {\n//             if (this.subscription) {\n//                 this.subscription();\n//                 this.subscription = null;\n//             }\n\n//             // Subscribe or re-subscribe\n//             if (!this.subscription) {\n//                 this.subscribeToCount();\n//             }\n//         }\n//     }\n\n//     public componentWillUnmount() {\n//         if (this.subscription) {\n//             this.subscription();\n//         }\n//     }\n\n//     private subscribeToCount() {\n//         const { subscribeToMore } = this.props;\n//         this.subscription = subscribeToMore({\n//             document: onCountUpdated,\n//             variables: {},\n//             updateQuery: (prev, { subscriptionData: { data: { countUpdated: { amount } } } }) => {\n//                 return update(prev, {\n//                     count: {\n//                         amount: {\n//                             $set: amount,\n//                         },\n//                     },\n//                 });\n//             },\n//         });\n//     }\n\n//     public render() {\n//         const { ICounerProps } = this.props;\n//         return <CounterComponent />;\n//     }\n// }\n\n\n// save(amount) {\n//     return () => mutate({\n//         variables: { amount },\n//         updateQueries,\n//     });\n// },\n\ntype countOptions = getCountQuery & subscribeToCountSubscription & {\n    countData: any;\n};\n\nconst updateQueries = {\n    counter: (prev, { mutationResult }) => {\n        const newAmount = mutationResult.data.addCount.amount;\n        return update(prev, {\n            count: {\n                amount: {\n                    $set: newAmount,\n                },\n            },\n        });\n    },\n};\n\nexport const CounterWithApollo: React.ComponentClass = (compose(\n    graphql<addCountMutation>(ADD_COUNT_MUTATION, {\n        props: ({ ownProps, mutate }) => ({\n            save: (amount) => {\n                return () => mutate({\n                    variables: { amount },\n                    updateQueries,\n                });\n            },\n        }),\n    }),\n    graphql<addCountMutation>(ADD_COUNT_MUTATION, {\n        props: ({ ownProps, mutate }) => ({\n            increment: (amount) => {\n                return () => mutate({\n                    variables: { amount },\n                    updateQueries,\n                });\n            },\n        }),\n    }),\n)(graphql<countOptions, ICounterProps>(COUNT_QUERY, {\n    name: 'countData',\n    props: ({ countData }: any) => {\n        const newlog = logger.child({ childName: 'UIController' });\n        newlog.debug('count data : (%j)', countData);\n        return {\n            subscribeToCount: params => {\n                // logger.debug('count subscript data (%j)', params);\n                return countData.subscribeToMore({\n                    document: COUNT_SUBSCRIPTION,\n                    variables: {},\n                    updateQuery: (prev: any, { subscriptionData }) => {\n                        const payload = subscriptionData.data && subscriptionData.data.subscribeToWorkspace;\n                        if (!payload) {\n                            return prev;\n                        }\n                        return payload;\n                    },\n                });\n            },\n            counter: countData.count && countData.count.amount,\n            isLoading: countData.loading,\n            isSaving: false,\n            load: () => countData.count.amount,\n            error: countData.error,\n        };\n    },\n})(CounterComponent))\n);\n\n\n\n// WEBPACK FOOTER //\n// ./src/containers/ServerCounter.tsx","module.exports = require(\"immutability-helper\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"immutability-helper\"\n// module id = 14\n// module chunks = 0","module.exports = require(\"@sample-stack/client-core\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"@sample-stack/client-core\"\n// module id = 15\n// module chunks = 0"],"sourceRoot":""}