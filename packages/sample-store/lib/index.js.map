{"version":3,"sources":["webpack:///webpack/bootstrap df61890a71df4021e0e4","webpack:///./src/constants.ts","webpack:///./src/repository/index.ts","webpack:///./src/db-helpers/index.ts","webpack:///external \"inversify\"","webpack:///./src/index.ts","webpack:///./src/repository/counter-repository.ts","webpack:///./src/db-helpers/db-config.ts","webpack:///./src/db-helpers/abstract-repository.ts","webpack:///external \"knex\"","webpack:///./src/models/index.ts","webpack:///./src/models/interfaces/index.ts","webpack:///./src/models/interfaces/count-model.ts","webpack:///./src/models/counter.ts","webpack:///./src/repository-di-setup.ts"],"names":[],"mappings":"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","file":"lib/index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap df61890a71df4021e0e4","export const TYPES = {\n    ICounterRepository: Symbol('ICounterService'),\n};\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/constants.ts","export * from './counter-repository';\nexport * from './interfaces';\n\n\n\n// WEBPACK FOOTER //\n// ./src/repository/index.ts","export * from './entity';\nexport * from './db-config';\nexport * from './abstract-repository';\nexport * from './repository';\n\n\n\n// WEBPACK FOOTER //\n// ./src/db-helpers/index.ts","module.exports = require(\"inversify\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"inversify\"\n// module id = 3\n// module chunks = 0","export * from './constants';\nexport * from './repository';\nexport * from './models';\nexport * from './db-helpers';\nexport * from './repository-di-setup';\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.ts","import { AbstractRepository } from '../db-helpers';\nimport { ICounterRepository } from './interfaces';\nimport { ICount } from '../models';\nimport { injectable } from 'inversify';\n\n@injectable()\nexport class CounterRepository extends AbstractRepository implements ICounterRepository {\n\n    // Set the table name to count\n    protected tableName: string = 'count';\n\n    public async getById(id: number): Promise<ICount> {\n        return await this.getTable()\n            .where({ id })\n            .first();\n    }\n\n    public async find(filter: string, pageNumber: number = 1, count: number = 20): Promise<ICount[]> {\n        return await this.getTable().where('amount', 'like', `%${filter}`).select();\n    }\n\n    public async create(dto: ICount): Promise<ICount> {\n        throw new Error('Method not implemented');\n    }\n\n    public async update(dto: ICount): Promise<ICount> {\n        throw new Error('Method not implemented');\n    }\n    public async getCount(): Promise<ICount> {\n        return await this.getTable().first();\n    }\n\n    public async  addCount(amount) {\n        await this.getTable().increment('amount', amount);\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/repository/counter-repository.ts","import { Config } from 'knex';\n\nexport class DbConfig {\n    constructor(private config: Config) {\n\n    }\n    public getConfiguration(): Config { return this.config; }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/db-helpers/db-config.ts","import { inject, injectable } from 'inversify';\nimport * as Knex from 'knex';\nimport { DbConfig } from './db-config';\n\nlet _db: Knex;\n\n/**\n * Returns an instance of database\n */\nconst getDb = (config: DbConfig): Knex => {\n\n    if (!_db) {\n        _db = Knex(config.getConfiguration())\n    }\n\n    return _db;\n};\n\n@injectable()\nexport abstract class AbstractRepository {\n\n    @inject('DefaultDbConfig')\n    public dbConfig: DbConfig;\n\n    protected abstract tableName: string;\n\n    /**\n     * Returns an instance of database\n     */\n    public getDb(): Knex {\n        return getDb(this.dbConfig);\n    }\n\n    /**\n     * Returns a IQueryBuilder instance of Table\n     */\n    public getTable(): Knex.QueryBuilder {\n        return this.getDb().table(this.tableName);\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/db-helpers/abstract-repository.ts","module.exports = require(\"knex\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"knex\"\n// module id = 8\n// module chunks = 0","export * from './interfaces';\nexport * from './counter';\n\n\n\n// WEBPACK FOOTER //\n// ./src/models/index.ts","export * from './count-model';\n\n\n\n// WEBPACK FOOTER //\n// ./src/models/interfaces/index.ts","import { IEntity } from '../../db-helpers';\n\nexport class ICount implements IEntity {\n\n    public id: number;\n\n    public amount: number;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/models/interfaces/count-model.ts","import * as Sequelize from 'sequelize';\n\n\nexport default (sequelize: Sequelize, DataTypes: Sequelize.DataTypes) => {\n    const Count = sequelize.define('count', {\n        name: DataTypes.STRING,\n    });\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/models/counter.ts","import { Container } from 'inversify';\nimport { ICounterRepository, CounterRepository } from './repository';\nimport { TYPES } from './constants';\n\n\nexport class RepositoryDiSetup {\n    public setup(container: Container): void {\n        container.bind<ICounterRepository>(TYPES.ICounterRepository).to(CounterRepository);\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/repository-di-setup.ts"],"sourceRoot":""}