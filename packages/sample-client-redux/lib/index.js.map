{"version":3,"sources":["webpack:///webpack/bootstrap 9135f88eae5f108277fa","webpack:///./src/index.ts","webpack:///./src/reducers/index.ts","webpack:///./src/reducers/sampleReducers.ts","webpack:///./src/actions/index.ts","webpack:///./src/actions/sampleActions.ts","webpack:///./src/api.ts"],"names":[],"mappings":"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","file":"lib/index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 9135f88eae5f108277fa","export * from './reducers';\nexport * from './actions';\n\n\n// WEBPACK FOOTER //\n// ./src/index.ts","import { reducers as sampleReducers } from './sampleReducers';\nexport { Store } from './Store';\n\nexport const reducers = {\n    ...sampleReducers,\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/reducers/index.ts","import { combineReducers, Action as reduxAction } from 'redux';\nimport { Action } from '../actions';\nimport { Store } from './Store';\n\nfunction isSaving(state: boolean = false, action: Action): boolean {\n  switch (action.type) {\n    case '@@sample-stack/SAVE_COUNT_REQUEST':\n      return true;\n    case '@@sample-stack/SAVE_COUNT_SUCCESS':\n    case '@@sample-stack/SAVE_COUNT_ERROR':\n      return false;\n    default:\n      return state;\n  }\n}\n\nfunction isLoading(state: boolean = false, action: Action): boolean {\n  switch (action.type) {\n    case '@@sample-stack/LOAD_COUNT_REQUEST':\n      return true;\n    case '@@sample-stack/LOAD_COUNT_SUCCESS':\n    case '@@sample-stack/LOAD_COUNT_ERROR':\n      return false;\n    default:\n      return state;\n  }\n}\n\nfunction error(state: string = '', action: Action): string {\n  switch (action.type) {\n    case '@@sample-stack/LOAD_COUNT_REQUEST':\n    case '@@sample-stack/SAVE_COUNT_REQUEST':\n      return '';\n    case '@@sample-stack/LOAD_COUNT_ERROR':\n    case '@@sample-stack/SAVE_COUNT_ERROR':\n      return action.error.toString();\n    default:\n      return state;\n  }\n}\n\nconst initialState: Store.Counter = {\n  value: 0,\n};\n\nfunction counter(state: Store.Counter = initialState, action: Action): Store.Counter {\n  switch (action.type) {\n    case '@@sample-stack/INCREMENT_COUNTER':\n      const { delta } = action;\n      return { value: state.value + delta };\n\n    case '@@sample-stack/RESET_COUNTER':\n      return { value: 0 };\n\n    case '@@sample-stack/LOAD_COUNT_SUCCESS':\n      return { value: action.response.value };\n\n    default:\n      return state;\n  }\n}\n\nexport const reducers = {\n  '@sample-stack/counter': counter,\n  '@sample-stack/isSaving': isSaving,\n  '@sample-stack/isLoading': isLoading,\n  '@sample-stack/error': error,\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/reducers/sampleReducers.ts","export * from './sampleActions';\n\n\n\n// WEBPACK FOOTER //\n// ./src/actions/index.ts","import * as redux from 'redux';\n\nimport { api } from '../api';\nimport { Store } from '../reducers/index';\n\nexport type Q<T> = { request: T };\nexport type S<T> = { response: T };\nexport type E = { error: Error };\n\nexport type QEmpty = Q<null>;\nexport type QValue = Q<{ value: number }>;\n\nexport type Action =\n  // UI actions\n  { type: '@@sample-stack/INCREMENT_COUNTER', delta: number }\n  | { type: '@@sample-stack/RESET_COUNTER' }\n\n  // API Requests\n  | ({ type: '@@sample-stack/SAVE_COUNT_REQUEST' } & QValue)\n  | ({ type: '@@sample-stack/SAVE_COUNT_SUCCESS' } & QValue & S<{}>)\n  | ({ type: '@@sample-stack/SAVE_COUNT_ERROR' } & QValue & E)\n\n  | ({ type: '@@sample-stack/LOAD_COUNT_REQUEST' } & QEmpty)\n  | ({ type: '@@sample-stack/LOAD_COUNT_SUCCESS' } & QEmpty & S<{ value: number }>)\n  | ({ type: '@@sample-stack/LOAD_COUNT_ERROR' } & QEmpty & E);\n\nexport const incrementCounter = (delta: number): Action => ({\n  type: '@@sample-stack/INCREMENT_COUNTER',\n  delta,\n});\n\nexport const resetCounter = (): Action => ({\n  type: '@@sample-stack/RESET_COUNTER',\n});\n\nexport type ApiActionGroup<_Q, _S> = {\n  request: (q?: _Q) => Action & Q<_Q>\n  success: (s: _S, q?: _Q) => Action & Q<_Q> & S<_S>\n  error: (e: Error, q?: _Q) => Action & Q<_Q> & E;\n};\n\nconst _saveCount: ApiActionGroup<{ value: number }, {}> = {\n  request: (request) =>\n    ({ type: '@@sample-stack/SAVE_COUNT_REQUEST', request }),\n  success: (response, request) =>\n    ({ type: '@@sample-stack/SAVE_COUNT_SUCCESS', request, response }),\n  error: (error, request) =>\n    ({ type: '@@sample-stack/SAVE_COUNT_ERROR', request, error }),\n};\n\nconst _loadCount: ApiActionGroup<null, { value: number }> = {\n  request: (request) =>\n    ({ type: '@@sample-stack/LOAD_COUNT_REQUEST', request: null }),\n  success: (response, request) =>\n    ({ type: '@@sample-stack/LOAD_COUNT_SUCCESS', request: null, response }),\n  error: (error, request) =>\n    ({ type: '@@sample-stack/LOAD_COUNT_ERROR', request: null, error }),\n};\n\ntype apiFunc<Q, S> = (q: Q) => Promise<S>;\n\nfunction apiActionGroupFactory<Q, S>(x: ApiActionGroup<Q, S>, go: apiFunc<Q, S>) {\n  return (request: Q) => (dispatch: redux.Dispatch<Store.Sample>) => {\n    dispatch(x.request(request));\n    go(request)\n      .then((response) => dispatch(x.success(response, request)))\n      .catch((e: Error) => dispatch(x.error(e, request)));\n  };\n}\n\nexport const saveCount = apiActionGroupFactory(_saveCount, api.save);\nexport const loadCount = apiActionGroupFactory(_loadCount, api.load);\n\n\n\n// WEBPACK FOOTER //\n// ./src/actions/sampleActions.ts","// Simulate a flaky API around otherwise an otherwise synchronous `f()`.\nconst flakify = <T>(f: () => T): Promise<T> =>\n  new Promise((resolve, reject) =>\n    // We'll always take 200 * (1d10 + 1) ms to respond\n    window.setTimeout(() => {\n      try {\n\n        // And ~20% of the time we'll fail\n        if (Math.random() < 0.2) {\n          throw new Error('Failed arbitrarily')\n        }\n\n        resolve(f())\n      }\n      catch (e) {\n        return reject(e)\n      }\n    }, 200 + Math.random() * 2000)\n  )\n\nexport type Api = {\n  save(x: { value: number }): Promise<null>,\n  load(): (Promise<{ value: number }>),\n}\n\nexport const api: Api = {\n  save: (counter) => flakify(() => {\n    localStorage.setItem('__counterValue', counter.value.toString())\n    return null\n  }),\n  load: () => flakify(() => {\n    const value = parseInt(localStorage.getItem('__counterValue'), 10)\n    return { value }\n  }),\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/api.ts"],"sourceRoot":""}